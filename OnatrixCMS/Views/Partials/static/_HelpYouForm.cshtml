@inherits Umbraco.Cms.Web.Common.Views.UmbracoViewPage
@using Umbraco.Cms.Core
@using Umbraco.Cms.Core.Models.PublishedContent
@using static Umbraco.Cms.Core.PropertyEditors.ValueConverters.ColorPickerValueConverter;

@{
    var helpYouForm = Umbraco.ContentAtRoot().FirstOrDefault(x => x.ContentType.Alias == "helpYouForm") ?? null;
    var headline = helpYouForm?.Value<string>("headlineText") ?? null;
    var text = helpYouForm?.Value<string>("text") ?? null;
    var headlineColor = helpYouForm?.Value<PickedColor>("headlineTextColor")?.Label.ToLower() ?? "sand";
    var textColor = helpYouForm?.Value<PickedColor>("textColor")?.Label.ToLower() ?? "darkwhite";
    var backgroundColor = helpYouForm?.Value<PickedColor>("backgroundColor")?.Label.ToLower() ?? "darkgray";
}

    @if (TempData["SuccessHelpYouForm"] == null)
    {
    @using (Html.BeginUmbracoForm("HandleSubmit", "HelpYouFormSurface", FormMethod.Post))
        {
            <div style="background-color: var(--color-@backgroundColor)" class="helpYouFormContainer">
                <div style="z-index: 0" class="letterContainer">
                    <svg width="148" height="113" viewBox="0 0 148 113" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path opacity="0.1" d="M140.753 1.07102L10.9793 39.2479C3.35831 41.4898 -0.994565 49.4046 1.29543 56.8789L28.9925 147.279C31.2747 154.728 39.3368 159.018 46.9855 156.768L176.759 118.591C184.361 116.355 188.739 108.455 186.443 100.96L158.746 10.5601C156.463 3.11109 148.401 -1.17906 140.753 1.07102ZM141.612 10.6732L97.7477 90.535L15.7045 47.7126L141.612 10.6732ZM37.6446 142.693L11.0813 55.9937L68.736 86.0863L37.6446 142.693ZM46.1264 147.166L77.2373 90.5235L97.452 101.074C99.7921 102.296 102.7 101.434 103.957 99.1456L114.586 79.7934L172.079 110.113L46.1264 147.166ZM176.644 101.802L119.151 71.4821L150.094 15.146L176.644 101.802Z" fill="#F2EDDC" />
                    </svg>
                </div>

                    <h4 style="color: var(--color-@headlineColor)" class="h4Headline noMargin">@((headline) ?? "How can we help you?")</h4>
                    <p style="color: var(--color-@textColor)" class="pText noMargin">@((text) ?? "Online support 24/7, we are here to help!")</p>
                    <div style="z-index: 10" class="inputContainer">
                    <input class="formHelpYouInput" style="margin: 0; font-style: italic;" placeholder="E-mail Address" />
                        <button style="padding: 0; border: none; background-color: transparent; width: 2rem; height: 2rem;" type="submit">
                            <svg width="23" height="22" viewBox="0 0 23 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M18.6294 4.125H4.19189C3.24266 4.125 2.47314 4.89451 2.47314 5.84375V16.1562C2.47314 17.1055 3.24266 17.875 4.19189 17.875H18.6294C19.5786 17.875 20.3481 17.1055 20.3481 16.1562V5.84375C20.3481 4.89451 19.5786 4.125 18.6294 4.125Z" stroke="#4F5955" stroke-width="1.375" stroke-linecap="round" stroke-linejoin="round" />
                                <path d="M5.22314 6.875L11.4106 11.6875L17.5981 6.875" stroke="#4F5955" stroke-width="1.375" stroke-linecap="round" stroke-linejoin="round" />
                            </svg>
                        </button>
                    </div>
                    @if (TempData["error_emailHelp"] != null)
                    {
                        <span class="errorMessage">An email is requried</span>
                    }
                    @if (TempData["ErrorHelpYouForm"] != null)
                    {
                        <span class="errorMessage">@TempData["ErrorHelpYouForm"]</span>
                    }
            </div>
        }
    }
    else
    {
        <div class="successMessage">@TempData["SuccessHelpYouForm"]</div>
    }

